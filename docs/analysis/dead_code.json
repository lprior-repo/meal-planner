{
  "analysis_date": "2025-12-03",
  "project": "/home/lewis/src/meal-planner",
  "summary": {
    "total_public_functions": 223,
    "potentially_unused_functions": 38,
    "stub_implementations": 15,
    "todo_comments": 30,
    "fixme_comments": 0
  },
  "dead_code_by_severity": {
    "critical": [
      {
        "type": "compilation_error",
        "file": "gleam/src/meal_planner/auto_planner.gleam",
        "lines": [207, 209],
        "issue": "Uses order.Lt and order.Gt without importing gleam/order",
        "impact": "Code will not compile",
        "fix_required": "Add: import gleam/order"
      }
    ],
    "high": [
      {
        "type": "stub_module",
        "file": "gleam/src/meal_planner/ui/pages/dashboard.gleam",
        "functions": [
          "render_dashboard",
          "calorie_summary_card",
          "macro_bars",
          "daily_log_list",
          "date_navigation",
          "meal_item"
        ],
        "issue": "All functions return placeholder strings with TODO comments",
        "todo_count": 9,
        "imported_by": [],
        "recommendation": "Complete implementation or remove entire module"
      },
      {
        "type": "stub_module",
        "file": "gleam/src/meal_planner/ui/pages/food_search.gleam",
        "functions": [
          "render_food_search_page",
          "search_form",
          "results_display",
          "result_item"
        ],
        "issue": "All functions return placeholder strings with TODO comments",
        "todo_count": 7,
        "imported_by": [],
        "recommendation": "Complete implementation or remove entire module"
      },
      {
        "type": "stub_module",
        "file": "gleam/src/meal_planner/ui/components/forms.gleam",
        "functions": [
          "input",
          "textarea",
          "select",
          "checkbox",
          "radio",
          "form_group",
          "validation_message"
        ],
        "issue": "All 7 functions return dummy string '<!-- TODO: Implement ... -->'",
        "todo_count": 8,
        "imported_by": [],
        "recommendation": "Complete lustre integration or remove module"
      },
      {
        "type": "stub_module",
        "file": "gleam/src/meal_planner/ui/components/progress.gleam",
        "functions": [
          "progress_bar",
          "progress_circle",
          "progress_steps",
          "loading_spinner"
        ],
        "issue": "Contains TODO about missing lustre imports, functions not properly implemented",
        "todo_count": 2,
        "imported_by": [],
        "recommendation": "Add lustre imports and complete implementation"
      }
    ],
    "medium": [
      {
        "type": "orphaned_module",
        "file": "gleam/src/meal_planner/state.gleam",
        "functions": [
          "start",
          "get_profile",
          "update_profile"
        ],
        "issue": "State management actor not used in stateless web architecture",
        "imported_by": [],
        "recommendation": "Remove if truly unused, or document why it's kept"
      },
      {
        "type": "orphaned_module",
        "file": "gleam/src/meal_planner/auto_planner/storage.gleam",
        "functions": [
          "save_auto_plan",
          "get_auto_plan_by_id",
          "list_auto_plans"
        ],
        "issue": "Storage functions for auto_planner not yet called anywhere",
        "imported_by": [],
        "recommendation": "Keep for future integration, or remove if not needed"
      },
      {
        "type": "orphaned_module",
        "file": "gleam/src/meal_planner/weekly_plan.gleam",
        "functions": [
          "generate_weekly_meal_plan"
        ],
        "issue": "Weekly planning not integrated in web routes",
        "imported_by": [],
        "recommendation": "Integrate into web.gleam or remove"
      },
      {
        "type": "orphaned_module",
        "file": "gleam/src/meal_planner/ui/recipe_form.gleam",
        "functions": [
          "render_form"
        ],
        "issue": "Recipe form HTML generator not called from web routes",
        "imported_by": [],
        "recommendation": "Add POST /recipes route handler or remove"
      }
    ],
    "low": [
      {
        "type": "cli_only",
        "file": "gleam/src/meal_planner/output.gleam",
        "functions": [
          "print_daily_meal_plan",
          "print_shopping_list",
          "print_weekly_summary"
        ],
        "issue": "CLI output functions not used in web app",
        "imported_by": [],
        "recommendation": "Keep for CLI mode or remove if web-only"
      },
      {
        "type": "cli_only",
        "file": "gleam/src/meal_planner/user_profile.gleam",
        "functions": [
          "print_user_profile"
        ],
        "issue": "Profile printing not used in web",
        "imported_by": [],
        "recommendation": "Remove or convert to web views"
      },
      {
        "type": "potentially_redundant",
        "file": "gleam/src/meal_planner/validation.gleam",
        "functions": [
          "validate_recipes"
        ],
        "issue": "May be superseded by diet_validator module",
        "imported_by": [],
        "recommendation": "Verify and consolidate validation logic"
      },
      {
        "type": "unused_export",
        "file": "gleam/src/meal_planner/auto_planner.gleam",
        "functions": [
          "filter_by_diet_principles",
          "calculate_macro_match_score",
          "calculate_variety_score",
          "score_recipe",
          "select_top_n",
          "generate_auto_plan"
        ],
        "issue": "Entire auto_planner module not yet integrated",
        "imported_by": [],
        "recommendation": "Integrate or mark as future feature"
      }
    ]
  },
  "todo_comments": [
    {
      "file": "gleam/src/meal_planner/web.gleam",
      "line": 93,
      "comment": "TODO: Implement edit page",
      "context": "Missing recipe edit functionality"
    },
    {
      "file": "gleam/src/meal_planner/auto_planner/storage.gleam",
      "line": 108,
      "comment": "For now, create a default config (TODO: parse config_json)",
      "context": "JSON parsing for AutoPlanConfig not implemented"
    },
    {
      "file": "gleam/src/meal_planner/food_search.gleam",
      "line": 54,
      "comment": "TODO: When custom_food_storage module is ready, split limit 50/50",
      "context": "Custom food storage not yet implemented"
    },
    {
      "file": "gleam/src/meal_planner/ui/types/ui_types.gleam",
      "line": 170,
      "comment": "TODO: Add more types as needed",
      "context": "UI types may need expansion"
    }
  ],
  "commented_out_code": [],
  "unused_variables": {
    "note": "Gleam compiler is strict about unused variables - no unused variables detected at module level"
  },
  "recommendations": {
    "immediate": [
      "Fix compilation error in auto_planner.gleam (add order import)",
      "Remove or complete stub modules: dashboard, food_search, forms components",
      "Decide on state.gleam - remove if truly unused"
    ],
    "short_term": [
      "Integrate auto_planner into web routes or document as future feature",
      "Complete recipe_form integration with POST handler",
      "Address TODO comments in active code (web.gleam, storage.gleam)"
    ],
    "long_term": [
      "Decide on CLI vs web-only focus - remove unused CLI modules",
      "Consolidate validation logic (validation.gleam vs diet_validator.gleam)",
      "Complete or remove weekly_plan integration"
    ]
  },
  "code_quality_metrics": {
    "stub_to_total_ratio": "15/223 (6.7%)",
    "todo_density": "30 TODOs across 41 files (0.73 per file)",
    "orphaned_module_count": 11,
    "active_module_count": 30,
    "health_score": "72/100",
    "notes": [
      "High number of stub implementations reduces health score",
      "Many newly created files not yet integrated",
      "Core functionality (web, storage, food_search) is solid",
      "UI layer needs significant work"
    ]
  }
}
