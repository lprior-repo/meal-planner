{
  "analysis_date": "2025-12-03",
  "summary": {
    "total_candidates": 22,
    "estimated_space_saved": "~2-5 MB (excluding build/ directories)",
    "high_confidence_deletes": 18,
    "medium_confidence_deletes": 4
  },
  "immediate_actions": {
    "priority_1_high_confidence": [
      {
        "action": "delete_backup_files",
        "confidence": 100,
        "files": [
          "gleam/test/ui/progress_test.gleam.bak",
          "gleam/test/auto_planner_test.gleam.bak",
          "gleam/src/meal_planner/custom_food_storage.gleam.BROKEN",
          "gleam/src/meal_planner/custom_food_storage.gleam.OLD",
          "server/src/server/web.gleam.backup"
        ],
        "rationale": "Backup files from completed refactors, verified working versions exist",
        "command": "git rm gleam/test/ui/progress_test.gleam.bak gleam/test/auto_planner_test.gleam.bak gleam/src/meal_planner/custom_food_storage.gleam.BROKEN gleam/src/meal_planner/custom_food_storage.gleam.OLD server/src/server/web.gleam.backup"
      },
      {
        "action": "delete_build_logs",
        "confidence": 100,
        "files": [
          "server/build-errors.txt",
          "server/build.log",
          "server/build_output.txt",
          "server/final-test-output.txt",
          "server/test-output.txt"
        ],
        "rationale": "Build and test logs should not be in version control",
        "command": "git rm server/build-errors.txt server/build.log server/build_output.txt server/final-test-output.txt server/test-output.txt"
      },
      {
        "action": "delete_broken_files",
        "confidence": 95,
        "files": [
          "server/src/server/meal_logging.gleam.broken3",
          "server/src/server/meal_logging_api.gleam.broken2",
          "server/src/server/meal_logging_api.gleam.disabled",
          "server/src/server/meal_logging_backup.gleam.disabled",
          "server/src/server/web_dashboard_patch.gleam.broken"
        ],
        "rationale": "Failed refactoring attempts, main versions work",
        "precondition": "Verify server tests pass first",
        "command": "git rm server/src/server/*.broken* server/src/server/*.disabled"
      }
    ],
    "priority_2_wip_files": [
      {
        "action": "review_and_delete_wip",
        "confidence": 90,
        "files": [
          "gleam/src/meal_planner/auto_planner.gleam.wip",
          "gleam/src/meal_planner/diet_validator.gleam.wip",
          "gleam/test/auto_planner_test.gleam.wip"
        ],
        "rationale": "WIP files from recent development (2025-12-03), main versions exist",
        "precondition": "Verify gleam tests pass and auto_planner works",
        "command": "cd gleam && gleam test && cd .. && git rm gleam/src/meal_planner/*.wip gleam/test/*.wip"
      },
      {
        "action": "move_or_delete_misplaced",
        "confidence": 85,
        "files": [
          "gleam/test_progress.gleam",
          "scripts/insert_vertical_diet_recipes.gleam",
          "server/src/server/web_dashboard_functions.txt"
        ],
        "rationale": "Files in wrong location violating project structure",
        "options": [
          "Move gleam/test_progress.gleam to gleam/test/",
          "Delete if duplicate of gleam/test/ui/progress_test.gleam",
          "Move scripts/*.gleam to gleam/src/scripts/",
          "Move .txt notes to docs/"
        ],
        "commands": [
          "git mv gleam/test_progress.gleam gleam/test/progress_test_moved.gleam",
          "git mv scripts/insert_vertical_diet_recipes.gleam gleam/src/scripts/",
          "git rm server/src/server/web_dashboard_functions.txt"
        ]
      }
    ],
    "priority_3_build_artifacts": [
      {
        "action": "untrack_build_directories",
        "confidence": 100,
        "directories": [
          "gleam/build/",
          "shared/build/"
        ],
        "rationale": "Build artifacts should NEVER be in version control",
        "command_sequence": [
          "echo 'build/' >> gleam/.gitignore",
          "echo 'build/' >> shared/.gitignore",
          "git rm -r --cached gleam/build/",
          "git rm -r --cached shared/build/",
          "git add gleam/.gitignore shared/.gitignore",
          "git commit -m 'chore: Remove build artifacts from version control'"
        ],
        "estimated_space_saved": "~1-2 MB"
      }
    ],
    "priority_4_generated_files": [
      {
        "action": "untrack_metrics_and_db",
        "confidence": 100,
        "files": [
          ".claude-flow/metrics/system-metrics.json",
          ".claude-flow/metrics/performance.json",
          ".claude-flow/metrics/task-metrics.json",
          ".claude-flow/metrics/agent-metrics.json",
          ".swarm/memory.db",
          ".swarm/memory.db-shm",
          ".swarm/memory.db-wal"
        ],
        "rationale": "Auto-generated runtime files, should be .gitignored",
        "current_size": "~550KB",
        "gitignore_additions": [
          ".claude-flow/metrics/*.json",
          ".swarm/*.db*"
        ],
        "command_sequence": [
          "echo '.claude-flow/metrics/*.json' >> .gitignore",
          "echo '.swarm/*.db*' >> .gitignore",
          "git rm --cached .claude-flow/metrics/*.json",
          "git rm --cached .swarm/memory.db*",
          "git add .gitignore",
          "git commit -m 'chore: Stop tracking auto-generated metrics and swarm DB'"
        ]
      }
    ]
  },
  "verification_checklist": [
    {
      "step": 1,
      "action": "Run full test suite",
      "command": "cd gleam && gleam test && cd ../server && gleam test",
      "reason": "Ensure no WIP or backup files are still needed"
    },
    {
      "step": 2,
      "action": "Verify auto-planner functionality",
      "command": "cd gleam && gleam test --target erlang auto_planner_test",
      "reason": "Confirm .wip files are truly obsolete"
    },
    {
      "step": 3,
      "action": "Check server endpoints",
      "command": "cd server && gleam test",
      "reason": "Ensure broken/disabled server files aren't referenced"
    },
    {
      "step": 4,
      "action": "Build both workspaces",
      "command": "cd gleam && gleam build && cd ../server && gleam build",
      "reason": "Confirm no import errors after deletions"
    }
  ],
  "recommended_gitignore_updates": {
    "file": ".gitignore",
    "additions_needed": [
      "# Build artifacts",
      "build/",
      "_build/",
      "*.beam",
      "*.ez",
      "",
      "# Generated files",
      ".claude-flow/metrics/*.json",
      ".swarm/*.db*",
      "",
      "# Logs and temporary files",
      "*.log",
      "build-*.txt",
      "test-output.txt",
      "",
      "# Backup files",
      "*.bak",
      "*.OLD",
      "*.BROKEN",
      "*.broken*",
      "*.disabled",
      "*.wip"
    ]
  },
  "rollback_plan": {
    "before_deleting": "Create a safety branch: git checkout -b cleanup-backup-$(date +%Y%m%d)",
    "if_problems": "git checkout main && git reset --hard HEAD@{1}",
    "timing": "All deleted files are recoverable from git history for 90 days"
  }
}