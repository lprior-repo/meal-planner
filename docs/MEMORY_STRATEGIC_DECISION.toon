::MEAL_PLANNER::STRATEGIC_MEMORY::FEATURE_FIRST_DEVELOPMENT
TIMESTAMP: 2025-12-20
DECISION_ID: strategic-shift-v1
CATEGORY: PROJECT_CONTEXT_EVOLVED

::DECISION::
Feature-first development strategy with technical debt acceptance.
Workflow simplified from 4-phase TDD to 2-phase ARCHITECT→CODER.

::RATIONALE::
User Priority: 100% API coverage + complete CLI/TUI implementation
Constraint: Time-to-feature critical; testing/refactoring deferred
Impact: Accelerates MVP 4-6 weeks instead of 8-12 weeks

::SCOPE::
- Closed 12 tasks: 5 TESTER phase + 4 REFACTORER phase + 3 integration
- Reduced backlog: 62 → 45 active tasks (27% reduction)
- Simplified workflow: Remove TESTER and REFACTORER phases entirely
- New rhythm: ARCHITECT (types/contracts) → CODER (minimal impl) → COMMIT

::CRITICAL_PRESERVED::
✅ ARCHITECT: Type definitions & contracts (integration layer)
✅ Error Handling: Result/Option patterns in CODER phase (railway-oriented)
✅ Database Schemas: 3 new tables for user preferences, sync metadata, queues
✅ HTTP Routes: Daemon coordination & scheduler API

::TECHNICAL_DEBT_ACCEPTED::
❌ Unit tests initially (deferred to Phase 5)
❌ Integration tests (deferred to Phase 7)
❌ Code optimization/refactoring (deferred to Phase 6)
❌ Monitoring & logging infrastructure (deferred to Phase 8)

::PARALLELIZABLE_TRACKS::
Track A (Handlers): 11 tasks, 2 weeks
  - ARCHITECT: Define Tandoor recipes, foods, shopping lists types (3)
  - ARCHITECT: Define FatSecret brands types (1)
  - CODER: Implement all handlers (7)
  → No dependencies, can run in parallel

Track B (CLI + Automation): 28 tasks, 3-4 weeks
  - CLI Commands: Tandoor (3), FatSecret (1), Plan (2), Nutrition (4), Scheduler (4)
  - Automation: Scheduler daemon (1), HTTP routes (1), Email executor (1), Email receiver (1), Email sender (1), FatSecret sync (1), Generation algorithm (1), Scheduler executor (1), Sync trigger (1), Generation trigger (1)
  - Database: User preferences (1), Sync metadata (1), Upload queue (1), Migrations (1)
  → Depends on Track A completion for type integration

Track C (TUI Screens): 6 tasks, 2-3 weeks
  - Food Search component + 6 screens
  → Can start after FatSecret Diary types finalized

::RECOVERY_PLAN::
Phase 5: Add comprehensive test coverage (100+ tests)
Phase 6: Refactor for Gleam idioms + performance optimization
Phase 7: Integration testing (15+20 tests)
Phase 8: Monitoring & logging infrastructure

::SUCCESS_METRICS::
API Coverage:
  Tandoor: 40% → 100% (recipes, foods, shopping lists)
  FatSecret: 84% → 100% (food brands added)

CLI Commands: 16/16 operational
TUI Screens: 6/6 operational

Automation:
  ✓ Scheduler daemon running
  ✓ Email feedback loop working
  ✓ FatSecret sync functional
  ✓ Weekly generation algorithm working

Quality Gates:
  ✓ gleam build passes
  ✓ make test passes (no NEW failures)
  ✓ gleam format --check passes
  ✓ Git history preserved

::IMPLEMENTATION_READINESS::
- 45 Beads tasks ready (0 blockers)
- 333 prior tasks completed
- Codebase ready for feature building
- No architectural blockers

::FILES_AFFECTED::
docs/REPRIORITIZATION_SUMMARY.md (comprehensive guide)
docs/fatsecret_coverage_analysis.md (baseline analysis)
docs/MEMORY_STRATEGIC_DECISION.toon (this file - strategic context)

Git commits:
  8ceb7bce: RED tests for CLI domain stubs
  81747eb8: mp tandoor update command
  bc2da3bd: REPRIORITIZATION: shift to feature-first
  a5051284: DOCUMENTATION: comprehensive reprioritization summary

::RELATED_TASKS::
P1 (Ready Now):
  - meal-planner-arxk.11: Tandoor Recipe Handler (ARCHITECT)
  - meal-planner-arxk.12: Tandoor Recipe Handler (CODER)
  - meal-planner-arxk.13: Tandoor Food Handler (ARCHITECT)
  - meal-planner-arxk.14: Tandoor Food Handler (CODER)
  - meal-planner-arxk.15: Tandoor Shopping List Handler (ARCHITECT)
  - meal-planner-arxk.16: Tandoor Shopping List Handler (CODER)
  - meal-planner-arxk.17: FatSecret Brands Handler (ARCHITECT)
  - meal-planner-arxk.18: FatSecret Brands Handler (CODER)

P2 (After P1):
  - 14 CLI command tasks (ready after handler types finalized)
  - 12 automation layer tasks (database, scheduler, email, sync, generation)
  - 2 database migration tasks

P3 (After FatSecret Diary types):
  - 6 TUI screen tasks

::DEFERRED_CLOSED_TASKS::
meal-planner-arxk.40: Tandoor Recipe Handler Tests → Phase 5
meal-planner-arxk.41: Tandoor Food Handler Tests → Phase 5
meal-planner-arxk.42: Tandoor Shopping List Tests → Phase 5
meal-planner-arxk.43: FatSecret Brands Tests → Phase 5
meal-planner-arxk.44: FatSecret Diary TUI Tests → Phase 5
meal-planner-arxk.45: Tandoor Recipe Optimization → Phase 6
meal-planner-arxk.46: Tandoor Food Optimization → Phase 6
meal-planner-arxk.47: FatSecret Optimization → Phase 6
meal-planner-arxk.48: FatSecret Diary Optimization → Phase 6
meal-planner-arxk.49: Tandoor Integration Tests → Phase 7
meal-planner-arxk.50: FatSecret Integration Tests → Phase 7
meal-planner-arxk.51: Logging Infrastructure → Phase 8

::CONSTRAINTS::
- No TESTER phase tasks created
- No REFACTORER phase tasks created
- All changes must pass: gleam build, make test, gleam format
- All work tracked in Beads (no markdown TODOs)
- Git history preserved for all decisions
