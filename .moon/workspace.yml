# https://moonrepo.dev/docs/config/workspace
$schema: './cache/schemas/workspace.json'

projects:
  - '.'

vcs:
  manager: 'git'
  defaultBranch: 'main'
  provider: 'github'
  # VCS hooks managed by Moon
  # Run `moon sync hooks` to enable locally (not auto-synced)
  hooks:
    pre-commit:
      - 'moon run :fmt :clippy :validate-yaml --affected --status=staged --no-bail'
  syncHooks: false

hasher:
  optimization: 'performance'
  # Global implicit inputs - changes to these invalidate ALL task caches
  implicitInputs:
    - '/Cargo.toml'
    - '/Cargo.lock'
    - '/.cargo/config.toml'
    - '/rust-toolchain.toml'

runner:
  cacheLifetime: '7 days'
