{"id":"meal-planner-4w8","title":"Macro progress bars","description":"Create protein, fat, carbs progress bars with color coding and smooth animations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:23:16.396671678-06:00","updated_at":"2025-12-13T13:31:18.833229628-06:00","closed_at":"2025-12-13T13:31:18.833229628-06:00","close_reason":"DONE: Macro progress bars implemented with exact design specs (24px height, 4px radius, smooth 0.6s animations)"}
{"id":"meal-planner-b7w","title":"Meal Planner Web Application MVP","description":"Complete web application with meal logging, recipe management, weekly planning, and mobile-responsive UI","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-13T13:23:16.360322214-06:00","updated_at":"2025-12-13T13:23:16.360322214-06:00"}
{"id":"meal-planner-b8w","title":"Food logging form page","description":"Implement /log/food/{id} route for portion selection and meal type when logging USDA foods","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:23:16.41352439-06:00","updated_at":"2025-12-13T13:31:18.848436079-06:00","closed_at":"2025-12-13T13:31:18.848436079-06:00","close_reason":"DONE: Food logging form page implemented at /log/food/:id with HTMX form submission"}
{"id":"meal-planner-dxd","title":"FatSecret API integration for calorie sync","description":"Sync food log entries to FatSecret for calorie tracking. User logs food in our app, we push entries to FatSecret API. Requires OAuth 1.0 authentication.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T13:37:15.61330841-06:00","updated_at":"2025-12-13T13:37:15.61330841-06:00"}
{"id":"meal-planner-dxd.1","title":"FatSecret SDK Core Infrastructure","description":"Core infrastructure for FatSecret SDK: config.gleam, oauth.gleam (HMAC-SHA1 signing), errors.gleam (ApiErrorCode enum with all error codes 2,3,4,5,6,7,8,9,13,14,101,106,107,108,205,206), http.gleam (HTTP client wrapper). Tests: errors_test.gleam, oauth_test.gleam. Must complete before other SDK beads.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-14T06:02:11.09477526-06:00","updated_at":"2025-12-14T06:03:35.142727341-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:11.106699286-06:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"meal-planner-dxd.1","author":"lewis","text":"## Files to Create\n\n### Source Files\n- `gleam/src/meal_planner/fatsecret/core/config.gleam` - FatSecretConfig type, API endpoints\n- `gleam/src/meal_planner/fatsecret/core/oauth.gleam` - OAuth 1.0a HMAC-SHA1 signing\n- `gleam/src/meal_planner/fatsecret/core/errors.gleam` - ApiErrorCode enum, FatSecretError type\n- `gleam/src/meal_planner/fatsecret/core/http.gleam` - HTTP client wrapper\n\n### Test Files  \n- `gleam/test/fatsecret/core/errors_test.gleam`\n- `gleam/test/fatsecret/core/oauth_test.gleam`\n- `gleam/test/fatsecret/helpers.gleam` - Shared test utilities\n\n## ApiErrorCode Enum (ALL FatSecret error codes)\n- 2: MissingOAuthParam\n- 3: UnsupportedOAuthParam  \n- 4: InvalidSignatureMethod\n- 5: InvalidConsumerKey\n- 6: TimestampExpired\n- 7: InvalidNonce\n- 8: InvalidSignature\n- 9: InvalidAccessToken\n- 13: InvalidBearerToken\n- 14: MissingScope\n- 101: MissingRequiredParam\n- 106: InvalidId\n- 107: ValueOutOfRange\n- 108: InvalidType\n- 205: WeightDateTooFar\n- 206: CannotUpdateEarlierWeight\n\n## OAuth Functions\n- generate_nonce() -\u003e 16 bytes hex\n- timestamp() -\u003e Unix seconds\n- oauth_encode(s) -\u003e RFC 3986\n- create_signature_base_string(method, url, params)\n- create_signature(base_string, consumer_secret, token_secret) -\u003e HMAC-SHA1 base64\n- build_oauth_params(config, method, url, params, token, token_secret)\n- parse_request_token(body) -\u003e RequestToken\n- parse_access_token(body) -\u003e AccessToken\n\n## Test Coverage (~20 tests)\n- Error code parsing roundtrip\n- HTTP status mapping\n- is_retryable/is_auth_error/is_param_error helpers\n- OAuth signature generation (known test vectors)\n- OAuth parameter encoding\n- Request/access token parsing","created_at":"2025-12-14T12:06:58Z"}]}
{"id":"meal-planner-dxd.1.1","title":"core/errors.gleam - ApiErrorCode enum","description":"Create ApiErrorCode enum with all 16 error codes: 2,3,4,5,6,7,8,9,13,14,101,106,107,108,205,206. Include from_code and to_code functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:37.574644457-06:00","updated_at":"2025-12-14T06:08:37.574644457-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.1","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:37.576538883-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.10","title":"core/oauth.gleam - Token types","description":"RequestToken, AccessToken types. parse_oauth_response(), parse_request_token(), parse_access_token() functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:49.755502583-06:00","updated_at":"2025-12-14T06:08:49.755502583-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.10","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:49.756562414-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.2","title":"core/errors.gleam - Error helpers","description":"Add is_retryable, is_auth_error, is_param_error, is_weight_error, is_oauth1_error, to_http_status, describe helper functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:37.595845482-06:00","updated_at":"2025-12-14T06:08:37.595845482-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.2","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:37.596859358-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.3","title":"core/errors.gleam - FatSecretError type","description":"Create FatSecretError sum type: ConfigMissing, RequestFailed, InvalidResponse, OAuthError, NetworkError, ApiErrorResponse, ParseError.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:37.616658473-06:00","updated_at":"2025-12-14T06:08:37.616658473-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.3","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:37.617582883-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.4","title":"core/errors.gleam - parse_error_response","description":"JSON parsing for FatSecret error format: {\"error\":{\"code\":N,\"message\":\"...\"}}","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:37.636034633-06:00","updated_at":"2025-12-14T06:08:37.636034633-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.4","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:37.636928383-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.5","title":"core/config.gleam - FatSecretConfig type","description":"FatSecretConfig type with consumer_key, consumer_secret. load() from env, is_configured(), from_credentials().","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:37.656625461-06:00","updated_at":"2025-12-14T06:08:37.656625461-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.5","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:37.657496443-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.6","title":"core/config.gleam - URL builders","description":"Constants and helpers: api_host, auth_host, api_path, api_url(), request_token_url(), authorize_url(token), access_token_url().","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:37.676022364-06:00","updated_at":"2025-12-14T06:08:37.676022364-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.6","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:37.677098957-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.7","title":"core/oauth.gleam - OAuth encoding","description":"oauth_encode (RFC 3986 strict), url_encode, url_decode, generate_nonce (16 bytes hex), timestamp() Unix seconds.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:49.692845357-06:00","updated_at":"2025-12-14T06:08:49.692845357-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.7","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:49.693730517-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.8","title":"core/oauth.gleam - Signature generation","description":"create_signature_base_string(method, url, params), create_signing_key(secret, token_secret), create_signature() HMAC-SHA1 base64.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:49.713827223-06:00","updated_at":"2025-12-14T06:08:49.713827223-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.8","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:49.715244638-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.1.9","title":"core/oauth.gleam - Parameter building","description":"build_base_params(config, token), build_oauth_params(config, method, url, params, token, secret), encode_params() as form body.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T06:08:49.734425664-06:00","updated_at":"2025-12-14T06:08:49.734425664-06:00","dependencies":[{"issue_id":"meal-planner-dxd.1.9","depends_on_id":"meal-planner-dxd.1","type":"parent-child","created_at":"2025-12-14T06:08:49.735500231-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.10","title":"FatSecret SDK Integration \u0026 Router","description":"Integration bead: fatsecret/fatsecret.gleam re-export facade, web/router.gleam route all domain handlers, integration_test.gleam end-to-end tests. Updates existing code to use new domain structure. Runs after all domain beads complete. 25 integration tests.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-14T06:02:21.512570202-06:00","updated_at":"2025-12-14T06:02:21.512570202-06:00","dependencies":[{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:21.513405705-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.2","type":"blocks","created_at":"2025-12-14T06:02:42.727903937-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.3","type":"blocks","created_at":"2025-12-14T06:02:42.744116385-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.4","type":"blocks","created_at":"2025-12-14T06:02:42.760273031-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.5","type":"blocks","created_at":"2025-12-14T06:02:42.776050861-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.6","type":"blocks","created_at":"2025-12-14T06:02:42.791205363-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.7","type":"blocks","created_at":"2025-12-14T06:02:42.806953232-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.8","type":"blocks","created_at":"2025-12-14T06:02:42.824160629-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.10","depends_on_id":"meal-planner-dxd.9","type":"blocks","created_at":"2025-12-14T06:02:42.840039728-06:00","created_by":"daemon"}]}
{"id":"meal-planner-dxd.2","title":"FatSecret SDK Foods Domain","description":"Foods domain: types.gleam (FoodId, Food, Serving, Nutrition), client.gleam (food.get.v5, foods.search.v1), service.gleam, handlers.gleam. Routes: GET /api/fatsecret/food/:id, GET /api/fatsecret/foods/search. Tests: 14 tests with mocks.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:12.2171325-06:00","updated_at":"2025-12-14T06:02:12.2171325-06:00","dependencies":[{"issue_id":"meal-planner-dxd.2","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:12.219345888-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.2","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.289758767-06:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"meal-planner-dxd.2","author":"lewis","text":"## API Endpoints\n\n### food.get.v5 (2-legged)\n**Params:** food_id (required), include_sub_categories, include_food_images, flag_default_serving, region, language\n**Returns:** Food with servings[], nutrients per serving\n**Response fields:** food_id, food_name, food_type, food_url, brand_name, servings.serving[]\n\n### foods.search.v1 (2-legged)  \n**Params:** search_expression (required), page_number, max_results, generic_description\n**Returns:** Paginated food results\n**Response fields:** foods.food[], max_results, total_results, page_number\n\n## Files to Create\n- `fatsecret/foods/types.gleam` - FoodId, Food, Serving, Nutrition, FoodSearchResult\n- `fatsecret/foods/client.gleam` - get_food(config, food_id), search_foods(config, query, params)\n- `fatsecret/foods/service.gleam` - High-level API with config loading\n- `fatsecret/foods/handlers.gleam` - Wisp handlers\n\n## Routes\n- GET /api/fatsecret/food/:id\n- GET /api/fatsecret/foods/search?q=\u0026page=\u0026limit=\n\n## Tests (~14 tests)\n- get_food success with full nutrition\n- get_food with brand food\n- get_food invalid ID (error 106)\n- search_foods empty results\n- search_foods pagination\n- search_foods with generic_description filter\n- Serving parsing with all nutrient fields\n- Mock responses for all scenarios","created_at":"2025-12-14T12:07:25Z"}]}
{"id":"meal-planner-dxd.3","title":"FatSecret SDK Recipes Domain","description":"Recipes domain: types.gleam (RecipeId, Recipe, Ingredient, Direction, RecipeType), client.gleam (recipe.get.v2, recipes.search.v3, recipe_types.get.v2), service.gleam, handlers.gleam. Routes: GET /recipe/:id, GET /recipes/search, GET /recipe-types. Tests: 18 tests with mocks.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:13.224004884-06:00","updated_at":"2025-12-14T06:02:13.224004884-06:00","dependencies":[{"issue_id":"meal-planner-dxd.3","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:13.225581257-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.3","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.306647481-06:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"meal-planner-dxd.3","author":"lewis","text":"## API Endpoints\n\n### recipe.get.v2 (2-legged)\n**Params:** recipe_id (required)\n**Returns:** Full recipe with ingredients, directions, nutrition\n**Response fields:** recipe_id, recipe_name, recipe_description, recipe_url, recipe_image, number_of_servings, prep_time_min, cook_time_min, rating, ingredients.ingredient[], directions.direction[], serving_sizes\n\n### recipes.search.v3 (2-legged)\n**Params:** search_expression, recipe_types, page_number, max_results, must_have_images, calories.from/to, prep_time.from/to\n**Returns:** Paginated recipe results  \n**Response fields:** recipes.recipe[], max_results, total_results, page_number\n\n### recipe_types.get.v2 (2-legged)\n**Params:** none\n**Returns:** List of recipe type categories\n**Response fields:** recipe_types.recipe_type[] with recipe_type_id, recipe_type_name\n\n## Files to Create\n- `fatsecret/recipes/types.gleam` - RecipeId, Recipe, RecipeIngredient, RecipeDirection, RecipeType, RecipeSearchResult\n- `fatsecret/recipes/client.gleam` - get_recipe, search_recipes, get_recipe_types\n- `fatsecret/recipes/service.gleam`\n- `fatsecret/recipes/handlers.gleam`\n\n## Routes\n- GET /api/fatsecret/recipe/:id\n- GET /api/fatsecret/recipes/search?q=\u0026type=\u0026page=\u0026limit=\n- GET /api/fatsecret/recipe-types\n\n## Tests (~18 tests)\n- get_recipe with full data\n- get_recipe with missing optional fields\n- search_recipes with filters\n- recipe_types list parsing\n- Ingredient parsing\n- Direction parsing","created_at":"2025-12-14T12:07:26Z"}]}
{"id":"meal-planner-dxd.4","title":"FatSecret SDK Favorites Domain","description":"Favorites domain (3-legged OAuth): types.gleam, client.gleam for food.add_favorite.v1, food.delete_favorite.v1, foods.get_favorites.v2, foods.get_most_eaten.v2, foods.get_recently_eaten.v2, recipe.add_favorite.v1, recipe.delete_favorite.v1, recipes.get_favorites.v2. 8 endpoints. Tests: 22 tests.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:14.28344168-06:00","updated_at":"2025-12-14T06:02:14.28344168-06:00","dependencies":[{"issue_id":"meal-planner-dxd.4","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:14.286268688-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.4","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.3233111-06:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"meal-planner-dxd.4","author":"lewis","text":"## API Endpoints (ALL 3-legged OAuth)\n\n### food.add_favorite.v1\n**Params:** food_id (required)\n**Returns:** success status\n\n### food.delete_favorite.v1\n**Params:** food_id (required)\n**Returns:** success status\n\n### foods.get_favorites.v2\n**Params:** page_number, max_results\n**Returns:** Paginated favorite foods\n\n### foods.get_most_eaten.v2\n**Params:** meal (optional: breakfast/lunch/dinner/other)\n**Returns:** Most frequently logged foods\n\n### foods.get_recently_eaten.v2\n**Params:** meal (optional)\n**Returns:** Recently logged foods\n\n### recipe.add_favorite.v1\n**Params:** recipe_id (required)\n**Returns:** success status\n\n### recipe.delete_favorite.v1\n**Params:** recipe_id (required)\n**Returns:** success status\n\n### recipes.get_favorites.v2\n**Params:** page_number, max_results\n**Returns:** Paginated favorite recipes\n\n## Files to Create\n- `fatsecret/favorites/types.gleam` - FavoriteFood, FavoriteRecipe, MostEatenFood\n- `fatsecret/favorites/client.gleam` - All 8 endpoints\n- `fatsecret/favorites/service.gleam`\n- `fatsecret/favorites/handlers.gleam`\n\n## Routes\n- POST /api/fatsecret/favorites/food/:id\n- DELETE /api/fatsecret/favorites/food/:id\n- GET /api/fatsecret/favorites/foods\n- GET /api/fatsecret/foods/most-eaten\n- GET /api/fatsecret/foods/recently-eaten\n- POST /api/fatsecret/favorites/recipe/:id\n- DELETE /api/fatsecret/favorites/recipe/:id\n- GET /api/fatsecret/favorites/recipes\n\n## Tests (~22 tests)","created_at":"2025-12-14T12:07:27Z"}]}
{"id":"meal-planner-dxd.5","title":"FatSecret SDK Saved Meals Domain","description":"Saved meals domain (3-legged OAuth): types.gleam (SavedMealId, SavedMeal, SavedMealItem), client.gleam for saved_meal.create/edit/delete, saved_meals.get.v2, saved_meal_item.add/edit/delete, saved_meal_items.get.v2. 8 endpoints. Routes under /api/fatsecret/saved-meals. Tests: 22 tests.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:15.363222765-06:00","updated_at":"2025-12-14T06:02:15.363222765-06:00","dependencies":[{"issue_id":"meal-planner-dxd.5","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:15.375803012-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.5","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.340552928-06:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"meal-planner-dxd.5","author":"lewis","text":"## API Endpoints (ALL 3-legged OAuth)\n\n### saved_meal.create\n**Params:** saved_meal_name, saved_meal_description (optional), meals (meal entries to include)\n**Returns:** saved_meal_id\n\n### saved_meal.edit\n**Params:** saved_meal_id (required), saved_meal_name, saved_meal_description\n**Returns:** success status\n\n### saved_meal.delete\n**Params:** saved_meal_id (required)\n**Returns:** success status\n\n### saved_meals.get.v2\n**Params:** meal (optional filter)\n**Returns:** List of saved meals\n\n### saved_meal_item.add\n**Params:** saved_meal_id, food_id OR food_entry_name, serving_id, number_of_units, calories/protein/fat/carbohydrate (for custom)\n**Returns:** saved_meal_item_id\n\n### saved_meal_item.edit\n**Params:** saved_meal_item_id (required), same as add\n**Returns:** success status\n\n### saved_meal_item.delete\n**Params:** saved_meal_item_id (required)\n**Returns:** success status\n\n### saved_meal_items.get.v2\n**Params:** saved_meal_id (required)\n**Returns:** List of items in saved meal\n\n## Files to Create\n- `fatsecret/saved_meals/types.gleam` - SavedMealId, SavedMeal, SavedMealItemId, SavedMealItem\n- `fatsecret/saved_meals/client.gleam` - All 8 endpoints\n- `fatsecret/saved_meals/service.gleam`\n- `fatsecret/saved_meals/handlers.gleam`\n\n## Routes\n- POST /api/fatsecret/saved-meals\n- PUT /api/fatsecret/saved-meals/:id\n- DELETE /api/fatsecret/saved-meals/:id\n- GET /api/fatsecret/saved-meals\n- POST /api/fatsecret/saved-meals/:id/items\n- PUT /api/fatsecret/saved-meal-items/:id\n- DELETE /api/fatsecret/saved-meal-items/:id\n- GET /api/fatsecret/saved-meals/:id/items\n\n## Tests (~22 tests)","created_at":"2025-12-14T12:07:57Z"}]}
{"id":"meal-planner-dxd.6","title":"FatSecret SDK Food Diary Domain","description":"Food diary domain (3-legged OAuth): types.gleam (FoodEntryId, FoodEntry, MealType, MonthSummary), client.gleam for food_entries.get.v2, food_entry.create/edit/delete, food_entries.copy, food_entries.copy_saved_meal, food_entries.get_month.v2. 7 endpoints. Routes under /api/fatsecret/food-entries. Tests: 22 tests.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:16.564031115-06:00","updated_at":"2025-12-14T06:02:16.564031115-06:00","dependencies":[{"issue_id":"meal-planner-dxd.6","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:16.564990795-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.6","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.356416104-06:00","created_by":"daemon"}],"comments":[{"id":6,"issue_id":"meal-planner-dxd.6","author":"lewis","text":"## API Endpoints (ALL 3-legged OAuth)\n\n### food_entries.get.v2\n**Params:** date (required, days since Unix epoch or 0 for today)\n**Returns:** food_entries[] for the day with totals\n**Response fields:** food_entry[], date_int\n\n### food_entry.create\n**Params:** food_id OR food_entry_name, serving_id, number_of_units, meal (breakfast/lunch/dinner/other), date, calories/protein/fat/carbohydrate (for custom)\n**Returns:** food_entry_id\n\n### food_entry.edit\n**Params:** food_entry_id (required), same as create\n**Returns:** success status\n\n### food_entry.delete\n**Params:** food_entry_id (required)\n**Returns:** success status\n\n### food_entries.copy\n**Params:** from_date, to_date, meal (optional)\n**Returns:** success status, count copied\n\n### food_entries.copy_saved_meal\n**Params:** saved_meal_id, date, meal\n**Returns:** success status\n\n### food_entries.get_month.v2\n**Params:** date (any day in month)\n**Returns:** Monthly summary with days[]\n**Response fields:** month{}, day[] with date_int, calories, fat, carbohydrate, protein\n\n## Files to Create\n- `fatsecret/diary/types.gleam` - FoodEntryId, FoodEntry, MealType, MonthSummary, DaySummary\n- `fatsecret/diary/client.gleam` - All 7 endpoints\n- `fatsecret/diary/service.gleam`\n- `fatsecret/diary/handlers.gleam`\n\n## Routes\n- GET /api/fatsecret/food-entries?date=\n- POST /api/fatsecret/food-entries\n- PUT /api/fatsecret/food-entries/:id\n- DELETE /api/fatsecret/food-entries/:id\n- POST /api/fatsecret/food-entries/copy\n- POST /api/fatsecret/food-entries/copy-saved-meal\n- GET /api/fatsecret/food-entries/month?date=\n\n## Tests (~22 tests)","created_at":"2025-12-14T12:07:59Z"}]}
{"id":"meal-planner-dxd.7","title":"FatSecret SDK Exercise Domain","description":"Exercise domain: types.gleam (ExerciseId, Exercise, ExerciseEntry), client.gleam for exercises.get.v2, exercise_entries.get.v2, exercise_entry.edit, exercise_entries.get_month.v2, exercise_entries.commit_day, exercise_entries.save_template. 6 endpoints. Tests: 18 tests.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:17.885838029-06:00","updated_at":"2025-12-14T06:02:17.885838029-06:00","dependencies":[{"issue_id":"meal-planner-dxd.7","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:17.886741696-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.7","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.372795541-06:00","created_by":"daemon"}],"comments":[{"id":7,"issue_id":"meal-planner-dxd.7","author":"lewis","text":"## API Endpoints\n\n### exercises.get.v2 (2-legged)\n**Params:** none\n**Returns:** List of all exercises with calories_per_hour\n\n### exercise_entries.get.v2 (3-legged)\n**Params:** date (required)\n**Returns:** exercise_entry[] for the day\n**Response fields:** exercise_entry_id, exercise_id, exercise_name, duration_min, calories\n\n### exercise_entry.edit (3-legged)\n**Params:** exercise_entry_id (required), exercise_id, duration_min\n**Returns:** success status\n\n### exercise_entries.get_month.v2 (3-legged)\n**Params:** date (any day in month)\n**Returns:** Monthly exercise summary\n**Response fields:** month{}, day[] with date_int, exercise_calories\n\n### exercise_entries.commit_day (3-legged)\n**Params:** date\n**Returns:** success status (locks the day's entries)\n\n### exercise_entries.save_template (3-legged)\n**Params:** date, template_name\n**Returns:** template_id\n\n## Files to Create\n- `fatsecret/exercise/types.gleam` - ExerciseId, Exercise, ExerciseEntryId, ExerciseEntry, ExerciseMonthSummary\n- `fatsecret/exercise/client.gleam` - All 6 endpoints\n- `fatsecret/exercise/service.gleam`\n- `fatsecret/exercise/handlers.gleam`\n\n## Routes\n- GET /api/fatsecret/exercises\n- GET /api/fatsecret/exercise-entries?date=\n- PUT /api/fatsecret/exercise-entries/:id\n- GET /api/fatsecret/exercise-entries/month?date=\n- POST /api/fatsecret/exercise-entries/commit\n- POST /api/fatsecret/exercise-entries/save-template\n\n## Tests (~18 tests)","created_at":"2025-12-14T12:08:00Z"}]}
{"id":"meal-planner-dxd.8","title":"FatSecret SDK Weight Domain","description":"Weight domain (3-legged OAuth): types.gleam (WeightEntry, WeightMonthSummary), client.gleam for weight.update, weights.get_month.v2. 2 endpoints. Special error codes 205 (date within 2 days) and 206 (cannot update earlier date). Routes: POST /weight, GET /weight/month. Tests: 8 tests.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:19.206862449-06:00","updated_at":"2025-12-14T06:02:19.206862449-06:00","dependencies":[{"issue_id":"meal-planner-dxd.8","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:19.208029416-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.8","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.38975654-06:00","created_by":"daemon"}],"comments":[{"id":8,"issue_id":"meal-planner-dxd.8","author":"lewis","text":"## API Endpoints (ALL 3-legged OAuth)\n\n### weight.update\n**Params:** current_weight_kg (required), date (optional, defaults to today), goal_weight_kg (optional), height_cm (optional), weight_comment (optional)\n**Returns:** success status\n**Special Error Codes:**\n- 205: date must be within 2 days from today\n- 206: cannot update weight for an earlier date than existing entry\n\n### weights.get_month.v2\n**Params:** date (any day in month, required)\n**Returns:** Monthly weight summary\n**Response fields:** month{}, day[] with date_int, weight_kg, weight_comment\n\n## Files to Create\n- `fatsecret/weight/types.gleam` - WeightEntry, WeightMonthSummary, WeightDaySummary\n- `fatsecret/weight/client.gleam` - update_weight, get_month_weights\n- `fatsecret/weight/service.gleam`\n- `fatsecret/weight/handlers.gleam`\n\n## Routes\n- POST /api/fatsecret/weight\n- GET /api/fatsecret/weight/month?date=\n\n## Tests (~8 tests)\n- update_weight success\n- update_weight with optional fields\n- update_weight error 205 (date too far)\n- update_weight error 206 (earlier date)\n- get_month_weights success\n- get_month_weights empty month\n- Weight unit conversion helpers\n- Mock responses for all scenarios","created_at":"2025-12-14T12:08:00Z"}]}
{"id":"meal-planner-dxd.9","title":"FatSecret SDK Profile Domain","description":"Profile domain: types.gleam (Profile, ProfileAuth, AuthTokens), client.gleam for profile.get, profile.create, profile.get_auth plus OAuth flow handlers (connect, callback, disconnect). Refactor existing OAuth flow from web/handlers/fatsecret.gleam. Tests: 10 tests.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T06:02:20.362252063-06:00","updated_at":"2025-12-14T06:02:20.362252063-06:00","dependencies":[{"issue_id":"meal-planner-dxd.9","depends_on_id":"meal-planner-dxd","type":"parent-child","created_at":"2025-12-14T06:02:20.363107401-06:00","created_by":"daemon"},{"issue_id":"meal-planner-dxd.9","depends_on_id":"meal-planner-dxd.1","type":"blocks","created_at":"2025-12-14T06:02:41.406115654-06:00","created_by":"daemon"}]}
{"id":"meal-planner-m0g","title":"Unified food search (custom + USDA)","description":"Search should query both custom_foods and USDA foods tables, returning unified results","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-13T13:23:16.429838976-06:00","updated_at":"2025-12-13T13:23:16.429838976-06:00"}
{"id":"meal-planner-nw7","title":"FatSecret OAuth Test Suite","description":"Comprehensive, fully-isolated test suite for FatSecret OAuth automation. Coverage: Unit + Integration + E2E tests. Isolation: Mock FatSecret API, use test DB. Minimal production code changes - only add HTTP abstraction with optional DI.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-14T06:06:59.492114048-06:00","updated_at":"2025-12-14T06:06:59.492114048-06:00"}
{"id":"meal-planner-nw7.1","title":"HTTP Client Abstraction for Testing","description":"Create gleam/src/meal_planner/fatsecret/http_client.gleam with HttpClientFn type and default_client(). Modify client.gleam to add _with variants (get_request_token_with, get_access_token_with, etc.) that accept optional http_client parameter. Keep existing public API unchanged.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:07.903310136-06:00","updated_at":"2025-12-14T06:07:07.903310136-06:00","dependencies":[{"issue_id":"meal-planner-nw7.1","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:07.904244045-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.2","title":"Test Support Modules","description":"Create gleam/test/support/ with: mock_http.gleam (Mock HTTP client with canned responses), test_db.gleam (Test PostgreSQL database setup/teardown), crypto_setup.gleam (Set/unset OAUTH_ENCRYPTION_KEY), fixtures.gleam (Load fixture files). Create gleam/test/fixtures/fatsecret/ with oauth/, api/, errors/ subdirectories containing test response files.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:22.862477552-06:00","updated_at":"2025-12-14T06:07:22.862477552-06:00","dependencies":[{"issue_id":"meal-planner-nw7.2","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:22.863347556-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.2","depends_on_id":"meal-planner-nw7.1","type":"blocks","created_at":"2025-12-14T06:07:22.864484212-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.3","title":"FatSecret Crypto Unit Tests","description":"Create gleam/test/fatsecret/crypto_test.gleam with tests: encrypt_decrypt_roundtrip, decrypt_invalid_ciphertext (Error(InvalidCiphertext)), decrypt_wrong_key (Error(DecryptionFailed)), key_not_configured (Error(KeyNotConfigured)), key_wrong_length (Error(KeyInvalidLength)).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:23.607139992-06:00","updated_at":"2025-12-14T06:07:23.607139992-06:00","dependencies":[{"issue_id":"meal-planner-nw7.3","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:23.608606505-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.3","depends_on_id":"meal-planner-nw7.1","type":"blocks","created_at":"2025-12-14T06:07:23.609841148-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.4","title":"OAuth Signature Unit Tests","description":"Create gleam/test/fatsecret/oauth_signature_test.gleam with tests: oauth_encode_unreserved (A-Za-z0-9-._~ pass through), oauth_encode_special_chars (Space-\u003e%20, \u0026-\u003e%26, =-\u003e%3D), signature_base_string_format (METHOD\u0026url\u0026params), signature_params_sorted (lexicographic order), hmac_sha1_known_vector.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:23.919044733-06:00","updated_at":"2025-12-14T06:07:23.919044733-06:00","dependencies":[{"issue_id":"meal-planner-nw7.4","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:23.919982483-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.4","depends_on_id":"meal-planner-nw7.1","type":"blocks","created_at":"2025-12-14T06:07:23.921402342-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.5","title":"Response Parsing Unit Tests","description":"Create gleam/test/fatsecret/response_parsing_test.gleam with tests: parse_request_token_success (token, secret, callback_confirmed), parse_access_token_success (token, secret), parse_food_search_multiple (array of foods), parse_food_search_single (not array), parse_api_error (code and message).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:25.092229041-06:00","updated_at":"2025-12-14T06:07:25.092229041-06:00","dependencies":[{"issue_id":"meal-planner-nw7.5","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:25.093179292-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.5","depends_on_id":"meal-planner-nw7.1","type":"blocks","created_at":"2025-12-14T06:07:25.094561717-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.6","title":"Storage Integration Tests","description":"Create gleam/test/fatsecret/storage_test.gleam. Requires test PostgreSQL database meal_planner_test. Tests: store_pending_token, get_pending_token_exists, get_pending_token_expired (after 15 min), get_pending_token_consumes (one-time use), store_access_token, get_access_token, delete_access_token, is_connected, touch_access_token.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:39.995450015-06:00","updated_at":"2025-12-14T06:07:39.995450015-06:00","dependencies":[{"issue_id":"meal-planner-nw7.6","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:39.997179128-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.6","depends_on_id":"meal-planner-nw7.2","type":"blocks","created_at":"2025-12-14T06:07:40.011275757-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.7","title":"FatSecret Client Tests with Mock HTTP","description":"Create gleam/test/fatsecret/client_test.gleam using mock HTTP client. Tests: get_request_token_success (fixture), get_request_token_401 (HTTP 401 -\u003e Error(RequestFailed)), get_access_token_success, search_foods_success, get_profile_success, api_error_response (Error(ApiError)), network_error (Error(NetworkError)).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:41.160744714-06:00","updated_at":"2025-12-14T06:07:41.160744714-06:00","dependencies":[{"issue_id":"meal-planner-nw7.7","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:41.161615556-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.7","depends_on_id":"meal-planner-nw7.2","type":"blocks","created_at":"2025-12-14T06:07:41.173083384-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.8","title":"FatSecret Service Layer Tests","description":"Create gleam/test/fatsecret/service_test.gleam. Requires Mock HTTP + Test DB + Crypto setup. Tests: check_status_config_missing, check_status_encryption_missing, check_status_not_connected, check_status_connected, validate_connection_success, validate_connection_revoked (401-\u003eFalse), get_profile_success, get_profile_auth_revoked, startup_check_validates, startup_check_clears_revoked.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:42.283390826-06:00","updated_at":"2025-12-14T06:07:42.283390826-06:00","dependencies":[{"issue_id":"meal-planner-nw7.8","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:42.285781889-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.8","depends_on_id":"meal-planner-nw7.6","type":"blocks","created_at":"2025-12-14T06:07:42.288122667-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.8","depends_on_id":"meal-planner-nw7.7","type":"blocks","created_at":"2025-12-14T06:07:42.290270894-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nw7.9","title":"FatSecret Property-Based Tests","description":"Create gleam/test/fatsecret/property_test.gleam using qcheck. Properties: crypto round-trip (encrypt then decrypt recovers original), OAuth encoding produces safe chars only, signature base string is deterministic for same inputs.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T06:07:43.821977929-06:00","updated_at":"2025-12-14T06:07:43.821977929-06:00","dependencies":[{"issue_id":"meal-planner-nw7.9","depends_on_id":"meal-planner-nw7","type":"parent-child","created_at":"2025-12-14T06:07:43.834423177-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.9","depends_on_id":"meal-planner-nw7.3","type":"blocks","created_at":"2025-12-14T06:07:43.837218128-06:00","created_by":"daemon"},{"issue_id":"meal-planner-nw7.9","depends_on_id":"meal-planner-nw7.4","type":"blocks","created_at":"2025-12-14T06:07:43.838619061-06:00","created_by":"daemon"}]}
{"id":"meal-planner-pf0","title":"Implement dashboard UI components","description":"Complete dashboard.gleam: render_dashboard layout, calorie_summary card, macro_progress_section with bars, daily_log_section with meal entries, date_selector navigation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T13:23:16.378577752-06:00","updated_at":"2025-12-13T13:31:18.818920218-06:00","closed_at":"2025-12-13T13:31:18.818920218-06:00","close_reason":"DONE: Dashboard UI components implemented with date navigation, calorie summary, macro progress bars, micronutrients, and daily log"}
{"id":"meal-planner-rfz","title":"API endpoint for logging USDA foods","description":"Add POST /api/logs/food endpoint for logging foods with micronutrient tracking","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-13T13:23:16.446730589-06:00","updated_at":"2025-12-13T13:23:16.446730589-06:00"}
