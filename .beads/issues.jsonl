{"id":"meal-planner-1qa","title":"[SDK] Extract decoders from client.gleam","description":"Remove decoder code (lines 1022-1340) from client.gleam, import from decoders/ directory. Make client HTTP-focused only.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:28:46.058918875-06:00","updated_at":"2025-12-14T13:45:36.941083492-06:00","closed_at":"2025-12-14T13:45:36.941083492-06:00","dependencies":[{"issue_id":"meal-planner-1qa","depends_on_id":"meal-planner-3ea","type":"blocks","created_at":"2025-12-14T12:28:53.135602608-06:00","created_by":"daemon"}]}
{"id":"meal-planner-23m","title":"Implement diary/service.gleam service layer","description":"Create service layer wrapper for diary API with auto-config loading","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T11:53:37.270070334-06:00","updated_at":"2025-12-14T12:03:09.197638424-06:00","closed_at":"2025-12-14T12:03:09.197638424-06:00"}
{"id":"meal-planner-3ea","title":"[SDK] Consolidate type system to types/ directory","description":"Delete types.gleam, extract types from client.gleam (lines 894-1009), establish types/ as single source of truth. Update 30+ imports. Impact: ~250 lines removed, eliminates 3 parallel hierarchies.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-14T12:28:45.981043804-06:00","updated_at":"2025-12-14T13:45:36.905983096-06:00","closed_at":"2025-12-14T13:45:36.905983096-06:00"}
{"id":"meal-planner-796","title":"Investigate Favorites endpoints returning 404","description":"All FatSecret Favorites endpoints return 404 Not Found despite having handlers and routes defined.\n\nAffected endpoints:\n- GET /api/fatsecret/favorites/foods\n- GET /api/fatsecret/favorites/foods/most-eaten\n- GET /api/fatsecret/favorites/recipes\n\nNeed to verify handler exports, module imports, and pattern matching with verbose logging.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-14T13:08:53.070196527-06:00","updated_at":"2025-12-14T13:08:53.070196527-06:00"}
{"id":"meal-planner-9jm","title":"Fix FatSecret Recipes search parser error","description":"Recipe search endpoint fetches data from API successfully but fails to parse the JSON response.\n\nError: 'Failed to parse recipe search'\nEndpoint: GET /api/fatsecret/recipes/search?q=chicken\n\nFiles to investigate:\n- gleam/src/meal_planner/fatsecret/recipes/decoders.gleam\n- gleam/src/meal_planner/web/handlers.gleam","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-14T13:08:51.929374019-06:00","updated_at":"2025-12-14T13:08:51.929374019-06:00"}
{"id":"meal-planner-a4h","title":"[SDK] Extract CRUD helpers for API boilerplate","description":"Create api/crud_helpers.gleam with 6 generic functions (get_resource, create_resource, update_resource, delete_resource, list_resources_paginated, build_query_params). Migrate 27 API files. Impact: 87% reduction (731 → 90 lines).","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-14T12:28:37.201633493-06:00","updated_at":"2025-12-14T13:45:36.798802898-06:00","closed_at":"2025-12-14T13:45:36.798802898-06:00"}
{"id":"meal-planner-add-api-middleware","title":"[HIGH-P2] Add missing middleware chains to API handlers","description":"Three legacy API endpoints missing the standard middleware chain for robustness.\n\nFiles:\n- gleam/src/meal_planner/web/handlers/recipes.gleam:111\n- gleam/src/meal_planner/web/handlers/macros.gleam:13\n- gleam/src/meal_planner/web/handlers/diet.gleam:15\n\nRequired Middleware Chain (on all 3 handlers):\n  use \u003c- wisp.log_request(req)\n  use \u003c- wisp.rescue_crashes\n  use req \u003c- wisp.handle_head(req)\n\nMiddleware Purpose:\n- log_request: HTTP request logging for debugging/monitoring\n- rescue_crashes: Catch panics, return 500 gracefully\n- handle_head: Convert HEAD requests to GET responses\n\nGolden Rules Violated: Rule 3 (Middleware \u0026 Control Flow)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T13:47:36.083864539-06:00","updated_at":"2025-12-14T20:49:26.632698429Z","closed_at":"2025-12-14T20:49:26.632698429Z","dependencies":[{"issue_id":"meal-planner-add-api-middleware","depends_on_id":"meal-planner-fix-recipe-scoring","type":"blocks","created_at":"2025-12-14T13:47:36.086161266-06:00","created_by":"daemon"},{"issue_id":"meal-planner-add-api-middleware","depends_on_id":"meal-planner-fix-macros-calculator","type":"blocks","created_at":"2025-12-14T13:47:36.088209847-06:00","created_by":"daemon"},{"issue_id":"meal-planner-add-api-middleware","depends_on_id":"meal-planner-fix-diet-compliance","type":"blocks","created_at":"2025-12-14T13:47:36.089882543-06:00","created_by":"daemon"}]}
{"id":"meal-planner-add-json-decoders","title":"[HIGH-P2] Add JSON decoders for type-safe request parsing","description":"Multiple endpoints (16+ POST/PUT handlers) lack JSON decoders for request bodies.\n\nAffected Endpoints:\n- POST /api/ai/score-recipe - ScoringRequest\n- POST /api/macros/calculate - MacrosRequest\n- POST /api/fatsecret/saved-meals - SavedMealRequest\n- PUT /api/fatsecret/saved-meals/:id - SavedMealEditRequest\n- POST /api/fatsecret/saved-meals/:id/items - SavedMealItemRequest\n- PUT /api/fatsecret/saved-meals/:id/items/:item_id - SavedMealItemEditRequest\n- And 10+ more FatSecret endpoints\n\nProblem:\nCurrent unsafe pattern cannot safely access JSON fields at compile time.\n\nRequired Safe Pattern (using gleam/dynamic/decode):\n1. Define request/response types for each endpoint\n2. Write decoders using gleam/dynamic/decode\n3. Replace unsafe wisp.require_json with type-safe parsing\n4. Update error handling for decoder failures\n\nBenefits:\n- Type-safe request parsing\n- Compiler prevents field access errors\n- Better error messages\n- Improved documentation\n\nGolden Rules Violated: Rule 4 (JSON Handling - strict typing)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-14T13:47:36.120229929-06:00","updated_at":"2025-12-14T13:47:36.120229929-06:00","dependencies":[{"issue_id":"meal-planner-add-json-decoders","depends_on_id":"meal-planner-add-api-middleware","type":"blocks","created_at":"2025-12-14T13:47:36.123147404-06:00","created_by":"daemon"}]}
{"id":"meal-planner-aqq","title":"SECURITY: debug_oauth1 exposes sensitive crypto material","description":"client.gleam debug_oauth1(): Returns signing_key containing consumer_secret and token_secret. Remove function or secure by stripping secrets from output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:47.340111091Z","updated_at":"2025-12-14T20:43:01.631099865Z","closed_at":"2025-12-14T20:43:01.631101415Z"}
{"id":"meal-planner-avm","title":"Implement FatSecret Exercise API endpoints","description":"Wire up Exercise tracking endpoints - SDK modules exist but handlers not implemented.\n\nEndpoints:\n- GET /api/fatsecret/exercises?q=running\n- GET /api/fatsecret/exercise-entries?date=YYYY-MM-DD\n- POST /api/fatsecret/exercise-entries\n- PUT/DELETE /api/fatsecret/exercise-entries/:id\n\nFiles: gleam/src/meal_planner/fatsecret/exercise/handlers.gleam","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T13:08:56.78052966-06:00","updated_at":"2025-12-14T13:08:56.78052966-06:00"}
{"id":"meal-planner-ays","title":"REFACTOR: Eliminate OAuth code duplication (60 lines)","description":"Duplicate oauth_encode, generate_nonce, int_to_hex, hex_digit, create_signature_base_string, create_signature. Client.gleam should import from oauth.gleam instead of redefining.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:48.173391032Z","updated_at":"2025-12-14T20:43:14.146541758Z","closed_at":"2025-12-14T20:43:14.146543848Z"}
{"id":"meal-planner-az9","title":"CRITICAL BUG: oauth_encode crashes on non-ASCII characters","description":"client.gleam line 126-129: Pattern match 'let assert \u003c\u003cbyte\u003e\u003e = \u003c\u003cchar:utf8\u003e\u003e' fails on multi-byte UTF-8 (e.g., 'crème'). Use oauth.gleam's encode_bytes approach or import from oauth module.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:46.619768309Z","updated_at":"2025-12-14T20:43:01.625793612Z","closed_at":"2025-12-14T20:43:01.625795462Z"}
{"id":"meal-planner-b7w.1","title":"Fix compilation blocker: tandoor/client.gleam deprecated json.decode()","description":"Line 335 uses deprecated json.decode() API that no longer exists in Gleam stdlib. Update to use decode.run() with proper decoder pipeline. BLOCKS BUILD.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T20:37:43.948920767Z","updated_at":"2025-12-14T20:52:41.048701413Z","closed_at":"2025-12-14T20:52:41.048701413Z"}
{"id":"meal-planner-b7w.12","title":"Remove unused state.gleam module","description":"146-line GenServer implementation with ZERO imports across codebase. Nobody uses it. Delete entirely. ~1 hour.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T20:37:54.001264389Z","updated_at":"2025-12-13T20:52:52.11055835Z","closed_at":"2025-12-13T20:52:52.11055835Z"}
{"id":"meal-planner-b7w.13","title":"Fix or remove non-functional Tandoor client (750 lines)","description":"tandoor/client.gleam returns hardcoded errors, doesn't actually work. Decision needed: implement properly or delete. If keeping, split into focused modules. ~16 hours to implement, ~1 hour to delete.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:37:55.284688635Z","updated_at":"2025-12-14T20:55:37.507469758Z"}
{"id":"meal-planner-b7w.14","title":"Remove unused metrics infrastructure (500+ lines)","description":"Elaborate Prometheus-style registry with no actual instrumentation. Premature abstraction violating YAGNI. Delete unused code. ~2 hours.","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-13T20:37:56.110537273Z","updated_at":"2025-12-13T20:37:56.110537273Z"}
{"id":"meal-planner-b7w.19","title":"Remove 86 useless tests","description":"health_endpoint_test.gleam has 40 tests that just assert True. food_logs_constraint_test.gleam tests nothing. 34 redundant tests. Delete entirely. ~2 hours.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T20:38:01.696521238Z","updated_at":"2025-12-13T20:52:52.115821211Z","closed_at":"2025-12-13T20:52:52.115821211Z"}
{"id":"meal-planner-b7w.2","title":"Fix missing import: metrics/calculation_instrumentation.gleam","description":"Line 36 uses int.to_float() without importing gleam/int. Add missing import statement.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T20:37:44.821698988Z","updated_at":"2025-12-14T20:52:51.147588125Z","closed_at":"2025-12-14T20:52:51.147588125Z"}
{"id":"meal-planner-b7w.21","title":"Remove 180 obvious comments","description":"Comments that restate code: '// Parse a number string' before parse_number(). Remove comments where function names/types already communicate intent. ~2 hours.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T20:38:03.995077371Z","updated_at":"2025-12-13T20:52:52.116369335Z","closed_at":"2025-12-13T20:52:52.116369335Z"}
{"id":"meal-planner-b7w.22","title":"Reduce excessive separator comments (200+ instances)","description":"ASCII art separators (===) appear every 10-20 lines creating visual clutter. Reduce by 70%, keep only module-level separators. ~1 hour.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-13T20:38:05.155928537Z","updated_at":"2025-12-13T20:52:52.11682278Z","closed_at":"2025-12-13T20:52:52.11682278Z"}
{"id":"meal-planner-b7w.26","title":"Eliminate 600 lines of duplicate code","description":"8 files duplicate timestamp utils, 200+ lines of duplicate storage instrumentation, 2 identical macro/micro calculations. Extract to shared utilities. ~15-18 hours.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:38:52.010931522Z","updated_at":"2025-12-14T20:55:37.496830125Z"}
{"id":"meal-planner-b7w.27","title":"Split types.gleam god object (1446 lines)","description":"Single file handles 10+ responsibilities. Split into domain modules: types/macros.gleam, types/micronutrients.gleam, serialization/json_encoders.gleam. ~4 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:38:53.592471789Z","updated_at":"2025-12-13T20:38:53.592471789Z"}
{"id":"meal-planner-b7w.28","title":"Split dashboard.gleam god function (670 lines)","description":"render_dashboard mixes HTML, CSS, HTMX, data transformation. Break into 4 focused modules. ~8 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:38:54.40396687Z","updated_at":"2025-12-13T20:38:54.40396687Z"}
{"id":"meal-planner-b7w.29","title":"Merge duplicate cache implementations","description":"cache.gleam and query_cache.gleam are nearly identical, only one is used. Merge into single implementation. ~8 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:38:55.389187681Z","updated_at":"2025-12-13T20:38:55.389187681Z"}
{"id":"meal-planner-b7w.3","title":"Remove 12 unused imports causing compiler warnings","description":"storage/logs.gleam has 9 unused imports, web/handlers/recipes.gleam has 4, metrics modules have others. Remove all to achieve zero warnings.","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-12-13T20:37:45.744709358Z","updated_at":"2025-12-14T20:53:16.639874806Z","closed_at":"2025-12-14T20:53:16.639874806Z"}
{"id":"meal-planner-b7w.30","title":"Add tests for FatSecret OAuth client (260 lines)","description":"ZERO tests for security-critical OAuth 1.0 signature generation. Test with RFC 5849 vectors, signature tampering, credential leakage. ~16 hours.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-13T20:38:56.305861405Z","updated_at":"2025-12-13T20:38:56.305861405Z"}
{"id":"meal-planner-b7w.31","title":"Add tests for food log entries (501 lines)","description":"ZERO tests for storage/logs/entries.gleam. Test 21 micronutrient combinations, source_type validation, concurrent saves, SQL injection prevention. ~20 hours.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-13T20:38:57.61778355Z","updated_at":"2025-12-13T20:38:57.61778355Z"}
{"id":"meal-planner-b7w.32","title":"Add tests for knapsack solver (160 lines)","description":"ZERO tests for business-critical algorithm. Test all 4 error cases, edge cases (empty, zero, overflow), algorithm correctness. ~12 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:38:58.499055766Z","updated_at":"2025-12-13T20:38:58.499055766Z"}
{"id":"meal-planner-b7w.33","title":"Add security tests for web handlers (1724 lines)","description":"ZERO tests for SQL injection, XSS, CSRF, input validation. Test all handlers: dashboard, foods, recipes, logs. ~24 hours.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-13T20:38:59.197733276Z","updated_at":"2025-12-13T20:38:59.197733276Z"}
{"id":"meal-planner-b7w.34","title":"Introduce value objects for measurements","description":"Primitive obsession: using Float for grams, calories, percentages. Create Grams, Calories, Percentage, PortionMultiplier types with validation. ~4-6 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:39:00.096838763Z","updated_at":"2025-12-13T20:39:00.096838763Z"}
{"id":"meal-planner-b7w.35","title":"Extract magic numbers to named constants","description":"NCP module has unexplained numbers: 40.0, 25.0, 5.0, 10.0 for scoring thresholds. Extract to named constants with documentation. ~1 hour.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-13T20:39:01.18666969Z","updated_at":"2025-12-13T20:39:01.18666969Z"}
{"id":"meal-planner-b7w.36","title":"Fix metrics layer circular dependencies","description":"metrics/*_instrumentation.gleam depend on concrete types from storage/tandoor/domain. Inverts dependency direction. Refactor to generic library. ~6 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:39:03.893693175Z","updated_at":"2025-12-13T20:39:03.893693175Z"}
{"id":"meal-planner-b7w.37","title":"Fix storage facade bypass in web handlers","description":"web/handlers/foods.gleam directly imports storage/foods bypassing facade. dashboard.gleam correctly uses facade. Make consistent. ~2 hours.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:39:04.885333447Z","updated_at":"2025-12-13T20:39:04.885333447Z"}
{"id":"meal-planner-b7w.4","title":"Fix or remove stubbed analytics module","description":"storage/analytics.gleam has 4 functions returning dummy data with TODOs about 'pog decoder API'. All analytics data is silently discarded. Either implement properly or remove module. ~12 hours.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T20:37:46.639402704Z","updated_at":"2025-12-14T20:56:59.618713935Z","closed_at":"2025-12-14T20:56:59.618713935Z"}
{"id":"meal-planner-b7w.5","title":"Fix hardcoded date '2025-12-13' in dashboard","description":"dashboard.gleam uses hardcoded date instead of actual today(). Makes nutrition tracking impossible for current day. Replace with proper date function.","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-13T20:37:47.525849109Z","updated_at":"2025-12-13T20:37:47.525849109Z"}
{"id":"meal-planner-b7w.6","title":"Fix silent error swallowing in generator","description":"Generator silently falls back to duplicate meals when knapsack solver fails. Users get no feedback about why planning failed. Add proper error logging and UI feedback.","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2025-12-13T20:37:48.458955149Z","updated_at":"2025-12-14T20:55:37.522888576Z"}
{"id":"meal-planner-b7w.7","title":"Fix broken date navigation (month boundaries)","description":"Date prev/next logic fails at month boundaries: Feb 1 → Jan 28, Jan 1 → Dec 31 same year. 80 lines of buggy hand-rolled date math. Replace with birl library.","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2025-12-13T20:37:49.340404393Z","updated_at":"2025-12-14T20:55:37.517776622Z"}
{"id":"meal-planner-chg","title":"CRITICAL BUG: get_current_time_ms returns hardcoded 0","description":"fallback.gleam line 344: get_current_time_ms() returns 0, breaking circuit breaker. Must use birl.now() and convert to milliseconds. BLOCKS fallback mechanism entirely.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:45.778588797Z","updated_at":"2025-12-14T20:43:01.620583927Z","closed_at":"2025-12-14T20:43:01.620587777Z"}
{"id":"meal-planner-d7j","title":"Implement FatSecret Diary API endpoints","description":"Wire up Diary API endpoints - SDK modules exist but handlers return wisp.not_found().\n\nEndpoints:\n- GET /api/fatsecret/diary?date=YYYY-MM-DD\n- POST /api/fatsecret/diary\n- PUT /api/fatsecret/diary/:entry_id\n- DELETE /api/fatsecret/diary/:entry_id\n- GET /api/fatsecret/diary/month\n\nFiles: gleam/src/meal_planner/fatsecret/diary/handlers.gleam","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T13:08:55.327898466-06:00","updated_at":"2025-12-14T13:08:55.327898466-06:00"}
{"id":"meal-planner-ewi","title":"TESTING: Re-enable 4 skipped test files","description":"Rename: oauth_test.gleam.skip→.gleam, http_integration_test.gleam.skip→.gleam, decoders_test.gleam.skip2→.gleam, recipe_encoder_test.gleam.skip→.gleam.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:50.648356516Z","updated_at":"2025-12-14T20:44:20.121206514Z"}
{"id":"meal-planner-fix-diet-compliance","title":"[CRITICAL-P1] Fix diet compliance endpoint to check actual recipes","description":"Diet compliance endpoint ignores recipe_id parameter and evaluates a hardcoded mock recipe instead.\n\nFile: gleam/src/meal_planner/web/handlers/diet.gleam:15\n\nProblem:\n- Lines 19-41: Mock recipe hardcoded\n- recipe_id parameter unused\n- No database lookup\n- No error handling for invalid ID\n\nRequired Changes:\n1. Fetch actual recipe from database using recipe_id\n2. Map database recipe to vertical_diet_compliance.Recipe type\n3. Pass actual recipe to compliance checker\n4. Handle errors: 400 (invalid ID), 404 (not found), 500 (DB error)\n\nGolden Rules Violated: Rule 5 (Error Handling), Rule 4 (JSON)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-14T13:47:36.022859045-06:00","updated_at":"2025-12-14T20:52:16.716301117Z","closed_at":"2025-12-14T20:52:16.716301117Z"}
{"id":"meal-planner-fix-macros-calculator","title":"[CRITICAL-P1] Fix macros calculator endpoint to process requests","description":"Macros calculator has no request body parsing. Returns documentation/sample response regardless of input.\n\nFile: gleam/src/meal_planner/web/handlers/macros.gleam:13\n\nProblem:\n- No wisp.require_json to parse request body\n- Returns hardcoded example response\n- Missing middleware chain\n- No aggregation logic\n\nRequired Changes:\n1. Add wisp.require_json(req) to parse request body\n2. Define MacrosRequest type with recipes array\n3. Create JSON decoder for MacrosRequest\n4. Implement aggregation logic to sum macros across recipes\n5. Return actual calculated totals\n\nGolden Rules Violated: Rule 4 (JSON Handling), Rule 3 (Middleware)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-14T13:47:35.9930699-06:00","updated_at":"2025-12-14T20:51:45.727127013Z","closed_at":"2025-12-14T20:51:45.727127013Z"}
{"id":"meal-planner-fix-recipe-scoring","title":"[CRITICAL-P1] Fix recipe scoring endpoint to parse actual JSON requests","description":"Recipe scoring endpoint returns hardcoded sample data instead of parsing request body. Function read_scoring_request() ignores request parameter.\n\nFile: gleam/src/meal_planner/web/handlers/recipes.gleam:158\n\nProblem:\n- Line 158: fn read_scoring_request(_req) returns hardcoded ScoringRequest\n- Missing wisp.require_json to parse request body\n- Missing JSON decoder for ScoringRequest type\n- Missing middleware chain (rescue_crashes, handle_head)\n\nRequired Changes:\n1. Use wisp.require_json(req) to parse request body\n2. Create JSON decoder for ScoringRequest using gleam/dynamic/decode\n3. Define decoders for nested types (ScoringRecipeInput, MacroTargets, ScoringWeights)\n4. Add missing middleware (rescue_crashes, handle_head)\n\nGolden Rules Violated: Rule 4 (JSON Handling), Rule 3 (Middleware)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-14T13:47:35.963490209-06:00","updated_at":"2025-12-14T20:51:17.221600923Z","closed_at":"2025-12-14T20:51:17.221600923Z"}
{"id":"meal-planner-fp1","title":"Fix FatSecret Foods router pattern matching bug","description":"Router pattern matching order prevents /api/fatsecret/foods/search from being reached. The catch-all pattern for food_id matches before the specific 'search' pattern.\n\nFiles: gleam/src/meal_planner/web/router.gleam:73-77\nStatus: Code fix applied (swapped lines), needs rebuild and testing verification\n\nTest: curl http://localhost:8080/api/fatsecret/foods/search?q=apple should return food search results, not 404","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-14T13:08:50.974466991-06:00","updated_at":"2025-12-14T13:08:50.974466991-06:00"}
{"id":"meal-planner-iho","title":"Implement profile/service.gleam service layer","description":"Create service layer wrapper for FatSecret profile API with auto-config loading and error translation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T11:53:35.055096491-06:00","updated_at":"2025-12-14T11:56:03.129191612-06:00","closed_at":"2025-12-14T11:56:03.129191612-06:00"}
{"id":"meal-planner-implement-log-food","title":"[MEDIUM-P3] Implement food logging handlers","description":"Implement food logging feature with form UI and API endpoint.\n\nFiles:\n- gleam/src/meal_planner/web/handlers.gleam:71-90\n\nEndpoints to Implement:\n1. GET /log/food/{fdc_id} - Return HTML form for logging food\n2. POST /api/logs/food - Process food log submission\n\nCurrent Status:\nBoth handlers return HTTP 501 (Not Implemented)\n\nRequired Implementation:\n1. Create HTML form for user input (HTMX-compatible)\n   - Input for quantity/servings\n   - Date picker\n   - Food info display\n   - Submit button with hx-post to /api/logs/food\n\n2. Parse form submission\n   - Extract form data (food_id, quantity, date, etc.)\n   - Validate inputs\n   - Store in database\n\n3. Return success/error response\n   - Success: Return food log entry\n   - Error: Return validation errors\n\nDatabase integration required for food_logs table.\n\nGolden Rules Violations: Rule 6 (File Structure - unimplemented handlers)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T13:47:36.153357831-06:00","updated_at":"2025-12-14T13:47:36.153357831-06:00","dependencies":[{"issue_id":"meal-planner-implement-log-food","depends_on_id":"meal-planner-add-json-decoders","type":"blocks","created_at":"2025-12-14T13:47:36.156315045-06:00","created_by":"daemon"}]}
{"id":"meal-planner-integrate-diary-handlers","title":"[QUICK-WIN-P2] Integrate FatSecret diary handlers into router (30min)","description":"QUICK WIN: FatSecret diary API is fully implemented (824 lines, production-ready) but NOT integrated into main router.\n\nFiles:\n- Router: gleam/src/meal_planner/web/router.gleam:170-197\n- Implementation: gleam/src/meal_planner/fatsecret/diary/handlers.gleam (COMPLETE, 824 lines)\n\nCurrent Status:\n- Router lines 170-197 return wisp.not_found() with TODO comments\n- But diary/handlers.gleam has COMPLETE production-ready implementation with:\n  * POST /api/fatsecret/diary/entries - Create food entry\n  * GET /api/fatsecret/diary/entries/:entry_id - Get single entry\n  * PATCH /api/fatsecret/diary/entries/:entry_id - Edit entry\n  * DELETE /api/fatsecret/diary/entries/:entry_id - Delete entry\n  * GET /api/fatsecret/diary/day/:date_int - Get all entries for date\n  * GET /api/fatsecret/diary/month/:date_int - Get month summary\n\nRequired Changes:\n1. Import diary handlers in router.gleam:\n   import meal_planner/fatsecret/diary/handlers as diary_handlers\n\n2. Replace TODO blocks (lines 170-197) with:\n   [\"api\", \"fatsecret\", \"diary\"] -\u003e diary_handlers.handle_diary_routes(req, ctx)\n\nImpact: 6 production-ready endpoints immediately unlocked with 30 minutes work!\n\nType: Integration (no new code, just delegation)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-14T13:47:36.053849807-06:00","updated_at":"2025-12-14T13:47:36.053849807-06:00"}
{"id":"meal-planner-kbv","title":"Investigate Saved Meals endpoints returning 404","description":"All FatSecret Saved Meals endpoints return 404 Not Found despite having handlers and routes defined.\n\nAffected endpoints:\n- GET /api/fatsecret/saved-meals\n- POST /api/fatsecret/saved-meals\n- PUT /api/fatsecret/saved-meals/:id\n\nMay have shared root cause with Favorites issue.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-14T13:08:54.186720139-06:00","updated_at":"2025-12-14T13:08:54.186720139-06:00"}
{"id":"meal-planner-lxv","title":"[SDK] Fix embedded types in ingredient.gleam","description":"Remove embedded Food and Unit types from types/recipe/ingredient.gleam, import from canonical locations.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:28:46.027048428-06:00","updated_at":"2025-12-14T13:24:22.93735378-06:00","closed_at":"2025-12-14T13:24:22.93735378-06:00"}
{"id":"meal-planner-m1u","title":"Implement diary/handlers.gleam web handlers","description":"Create Wisp web handlers for diary endpoints","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T11:53:38.217453306-06:00","updated_at":"2025-12-14T12:07:08.998237155-06:00","closed_at":"2025-12-14T12:07:08.998245606-06:00"}
{"id":"meal-planner-may","title":"Update fatsecret.gleam main module exports","description":"Add Exercise and Profile service exports to main facade module","notes":"Implemented Exercise and Profile service exports in fatsecret.gleam facade module","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T11:53:39.469763409-06:00","updated_at":"2025-12-14T11:58:53.890151494-06:00","closed_at":"2025-12-14T11:58:53.890157221-06:00"}
{"id":"meal-planner-nl9","title":"[SDK] Consolidate recipe decoders","description":"Keep recipe_decoder.gleam as entry point, remove embedded decoders (use imports), delete recipe_basic_decoder.gleam, refactor recipe_detail_decoder.gleam.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T12:28:46.091039636-06:00","updated_at":"2025-12-14T13:45:36.976208542-06:00","closed_at":"2025-12-14T13:45:36.976208542-06:00","dependencies":[{"issue_id":"meal-planner-nl9","depends_on_id":"meal-planner-3ea","type":"blocks","created_at":"2025-12-14T12:28:53.188279361-06:00","created_by":"daemon"}]}
{"id":"meal-planner-nlo","title":"Implement FatSecret Weight API endpoints","description":"Wire up Weight tracking endpoints - SDK fully implemented but handlers are stubs.\n\nEndpoints:\n- GET /api/fatsecret/weight?date=YYYY-MM-DD\n- POST /api/fatsecret/weight\n- GET /api/fatsecret/weight/month\n\nFiles: gleam/src/meal_planner/fatsecret/weight/handlers.gleam","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T13:08:57.965509742-06:00","updated_at":"2025-12-14T13:08:57.965509742-06:00"}
{"id":"meal-planner-pbp","title":"Implement diary/client.gleam HTTP client","description":"Create HTTP client for FatSecret diary API endpoints (food entries, summaries)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T11:53:36.332440444-06:00","updated_at":"2025-12-14T11:58:28.789672811-06:00","closed_at":"2025-12-14T11:58:28.789672811-06:00"}
{"id":"meal-planner-rk2","title":"INEFFICIENCY: oauth_encode verbose alphanumeric pattern matching","description":"client.gleam \u0026 oauth.gleam: Individually lists A-Z, a-z, 0-9. Use character code ranges (48-57, 65-90, 97-122) or helper predicates instead.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:49.749541219Z","updated_at":"2025-12-14T20:43:38.068067071Z","closed_at":"2025-12-14T20:43:38.068069291Z"}
{"id":"meal-planner-rzh","title":"INEFFICIENCY: pow() uses O(N) recursion on floats","description":"fallback.gleam line 351-357: Recursive power calculation prone to stack overflow. Replace with math library or iterative approach.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:41:49.063851049Z","updated_at":"2025-12-14T20:43:19.262057291Z","closed_at":"2025-12-14T20:43:19.262060561Z"}
