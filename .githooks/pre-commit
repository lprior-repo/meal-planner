#!/bin/bash
#
# pre-commit hook - Run quick quality checks via Moon
#
# Runs `moon run :quick` which includes fast pre-commit checks.
# Can be bypassed with: git commit --no-verify
#

set -e

# Set PATH to include mise shims and moon bin
export PATH="$HOME/.local/share/mise/shims:$HOME/.moon/bin:$PATH"

echo "Running pre-commit checks..."

if moon run :quick; then
    echo "All checks passed!"
    exit 0
else
    echo "Pre-commit checks failed. Fix the issues above and try again."
    exit 1
fi
